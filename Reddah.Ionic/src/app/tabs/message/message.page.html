<app-header title="Menu.Message" (click)="clear()"></app-header>
<ion-content style="background-color: white;" #container>
    <ion-item *ngFor="let message of messages" (click)="viewChat(message)">
        <div [ngClass]="{'new-point':message.IsNew}" style="margin:5px 0px;">
            <div class="singleGroupImage" *ngIf="message.Type==2">
                <div>
                    <img [useSrcset]="true" [lazyLoad]="reddah.appData('userphoto_'+GetSender(message.GroupName))" [scrollObservable]="container.ionScroll">
                </div>
            </div>
            <div class="groupImages" *ngIf="message.Type==3">
                <div *ngFor="let user of message.GroupName.split(',').slice(0,9)">
                    <img [useSrcset]="true" [lazyLoad]="reddah.appData('userphoto_'+user)" [scrollObservable]="container.ionScroll">
                </div>
            </div>
        </div>
        <ion-label style="margin-left:10px;" *ngIf="message.Type==2">
            <span class="user-name">{{reddah.getDisplayName(GetSender(message.GroupName))}}</span>
            <br>
            <ion-note color="dark" *ngIf="message.LastUpdateType==0">{{reddah.htmlDecode(message.LastUpdateContent)}}</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==1">[语音]</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==2">[图片]</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==3">[视频]</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==4">[Link]</ion-note>
        </ion-label>
        <ion-label style="margin-left:10px;" *ngIf="message.Type==3">
            <span class="user-name">{{message.Title}}</span>
            <br>
            <ion-note color="dark" *ngIf="message.LastUpdateType==0">{{reddah.getDisplayName(message.LastUpdateBy)}}: {{reddah.htmlDecode(message.LastUpdateContent)}}</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==1">[语音]</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==2">[图片]</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==3">[视频]</ion-note>
            <ion-note color="dark" *ngIf="message.LastUpdateType==4">[Link]</ion-note>
        </ion-label>
        <ion-note slot="end">
            {{reddah.getSendTimeChat(message.LastUpdateOn|date:'yyyy-MM-dd HH:mm:ss')}}<br>
            <ion-icon name="notifications-off" color="light" style="float:right;"></ion-icon>
        </ion-note>
    </ion-item>
</ion-content>