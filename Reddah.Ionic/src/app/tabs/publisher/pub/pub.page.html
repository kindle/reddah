<ion-item color="light" no-padding lines="none">
    <ion-icon name="ios-arrow-back" (click)="close()" class="backbutton"></ion-icon>
    <ion-text *ngIf="showTitle">{{reddah.appData('usernickname_'+userName)}}</ion-text>
    <ion-icon name="ios-more" slot="end" (click)="presentActionSheet()"></ion-icon>
</ion-item>
<ion-content #pageTop style="background-color:white;" [scrollEvents]="true" (ionScroll)="onScroll($event)">
    <div style="display: flex;align-items: center;flex-direction: column;padding-top: 30px;">
        <ion-thumbnail class="userPhoto">
            <img src="{{reddah.appDataPub('userphoto_'+userName)}}" (click)="viewer(reddah.appData('userphoto_'+userName))" class="portrait">
        </ion-thumbnail>
        <ion-label text-wrap style="margin: 20px;font-weight: bold;">{{reddah.appData('usernickname_'+userName)}}</ion-label>
        <ion-label id="scrollTag" text-wrap text-center style="margin: 10px;padding: 10px 30px;">{{reddah.appData('usersignature_'+userName)}}</ion-label>
    
        <ion-note text-wrap style="margin: 10px 0 40px 0;">{{18}}位朋友关注</ion-note>
    
        <span class="user-name" (click)="focus()" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==0">关注公众号</span>
        <span class="user-name" style="margin: 0 0 20px 0;" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==1">
            <i (click)="chat()">进入公众号首页</i> | <i (click)="unfocus()">取消关注</i>
        </span>
    </div>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content refreshingSpinner="bubbles">
        </ion-refresher-content>
    </ion-refresher>
    <div style="display: flex; justify-content: center;"><ion-spinner name="dots" *ngIf="showLoading"></ion-spinner></div>
    <ng-template ngFor let-article let-i="index" [ngForOf]="articles" id="homepage" style="color: #636468;font-family: 'Segoe UI', Arial, sans-serif;">
        <div *ngIf="i%7==0" text-center style="padding-top:35px;color:#878787;">{{article.CreatedOnOrg| date: 'MM-dd HH:mm'}}</div>
        <div class="postModuleLiner">
            <div *ngIf="article.VideoUrl.length>0">
                <span class="article-title" (click)="view(article)">{{reddah.htmlDecode(article.Title)}}</span>
                <div class="postClear"></div>
                <video id="video_{{article.Id}}" (click)="playVideo(article.Id)"
                        controls="controls" loop="true">
                    your browser does not support the video tag
                </video>
                <div class="postClear"></div>
            </div>
            <div *ngIf="article.VideoUrl.length==0" (click)="view(article)">
                <span class="article-title articleTitle" *ngIf="article.ImageUrls.length>1">{{reddah.htmlDecode(article.Title)}}</span>
                <div class="postClear" *ngIf="article.ImageUrls.length>1"></div>
                <div class="listImage" ng-style="{display:article.ImageUrls.length>1?'flex':''}">
                    <div class="listImageWrapper" *ngFor="let articleUrl of article.ImageUrls">
                        <!--<img class="lazy BrowsePreviewImage" onerror="this.style.display='none'" src="" data-original="{{articleUrl}}">-->
                        <img class="BrowsePreviewImage" onerror="this.style.display='none'" src="" src="{{articleUrl}}">
                    </div>
                </div>
                <span class="article-title articleTitle" *ngIf="article.ImageUrls.length<2">{{reddah.htmlDecode(article.Title)}}</span><br>
                <div style="color: #636468;">{{reddah.summary(article.Content, 100)}}</div>
            </div>
            <div class="postClear"></div>
            <div class="listInfo">
                <span *ngFor="let group of article.GroupName.split(',')" (click)="goSearch(group)" style="padding-right:5px;">
                    <u style="border-bottom: 1px solid #ff3030;text-decoration: none;color:#107c10;margin-bottom:2px;">{{group}}</u>
                </span>
            </div>
            <div class="postClear"></div>
            
        </div>
    </ng-template>
    
    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="{{ 'Button.Loading' | translate }}">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>