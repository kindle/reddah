
<ion-item color="light" no-padding lines="none">
    <ion-icon name="ios-arrow-back" (click)="close()" class="backbutton"></ion-icon>
    <ion-label>{{title}}</ion-label>
    <ion-icon slot="icon-only" slot="end" name="ios-more" (click)="option()"></ion-icon>
</ion-item>
<ion-content no-padding style="--background: #eeeeee;" #pageTop (click)="chatbox.hide()"> 
    <ion-grid *ngFor="let comment of messages">
        <ion-row>
            <ion-col no-padding>
                <div text-center class="chatTime" *ngIf="checkIsToday(comment.CreatedOn)">{{comment.CreatedOn | date:'HH:mm'}}</div>
                <div text-center class="chatTime" *ngIf="!checkIsToday(comment.CreatedOn)">{{comment.CreatedOn | date:'MM-dd HH:mm'}}</div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col no-padding>
                <div class="container-right" *ngIf="userName==comment.UserName">
                    <img src="{{reddah.appPhoto['userphoto_'+comment.UserName]}}" class="portrait" (click)="goUser(comment.UserName)">
                    <div class="arrow-box-right">
                        <div class="chat-box-me" *ngIf="comment.Type==0" [innerHTML]="reddah.htmlDecode(comment.Content) | safe: 'html'"></div>
                        <div class="chat-box-me-1" *ngIf="comment.Type==1" (click)="play(comment.Content)">
                            <ion-icon slot="start" name="ios-wifi" size="large" style="width:20px;height:18px;transform: rotate(-90deg);margin:auto;"></ion-icon>
                            <div style="display: flex; line-height:38px;">
                                <div style="width:5px;" *ngFor="let i of getArray(comment.Duration)">&nbsp;</div>
                                <div>{{comment.Duration}}''</div>
                            </div>
                        </div>
                        <div class="chat-arrow-right" style="flex:auto 0;" *ngIf="comment.Type<2"></div>
                        <div *ngIf="comment.Type==2">
                            <img [src]="comment.Content">
                        </div>
                    </div>
                </div>
                <div class="container-left" *ngIf="userName!=comment.UserName">
                    <img src="{{reddah.appPhoto['userphoto_'+comment.UserName]}}" class="portrait" (click)="goUser(comment.UserName)">
                    <div style="display: flex;margin-left:5px;">
                        <div class="chat-arrow-left" style="flex:0 auto;" *ngIf="comment.Type<2"></div>
                        <div class="chat-box-others" *ngIf="comment.Type==0" [innerHTML]="reddah.htmlDecode(comment.Content) | safe: 'html'"></div>
                        <div class="chat-box-others-1" *ngIf="comment.Type==1" (click)="play(comment.Content)">
                            <ion-icon name="ios-wifi" size="large" style="width:20px;height:18px;transform: rotate(90deg);margin:auto;"></ion-icon>
                            <div style="display: flex; line-height:38px;">
                                <div>{{comment.Duration}}''</div>
                                <div style="width:5px;" *ngFor="let i of getArray(comment.Duration)">&nbsp;</div>
                            </div>
                        </div>
                        <div *ngIf="comment.Type==2">
                            <img [src]="comment.Content">
                        </div>
                    </div>
                </div>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
<app-chat-box #chatbox selectedArticleId="{{chatId}}" selectedCommentId="-1"
    (reloadComments)="childReloadComments($event)"></app-chat-box>

