<ion-content padding [scrollEvents]="true" (ionScroll)="onScroll($event)">
    <H1 [innerHTML]="reddah.htmlDecode(article.Title) | safe: 'html'"></H1>
    <ion-item no-padding padding-bottom>
        <ion-text color="primary" margin-end (click)="goUser(article.UserName)">
            <span [innerHTML]="article.UserName | safe: 'html'"></span>
        </ion-text>
        <ion-text color="dark" margin-end>
            {{article.CreatedOn}} 
        </ion-text>
        <ion-buttons slot="end">
            <ion-button (click)="presentPopover($event)">
                <ion-icon slot="icon-only" name="ios-more"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-item>
    <ion-text color="dark">
        <div id="articleContent" (click)="viewer($event)" [innerHTML]="reddah.htmlDecode(article.Content) | safe: 'html'"></div>
    </ion-text>
    <ion-item no-padding padding-bottom>
    </ion-item>
    <ng-template ngFor let-group [ngForOf]="article.GroupName.split(',')">
        <ion-chip outline margin-bottom>
            <ion-label [innerHTML]="reddah.htmlDecode(group)"></ion-label>
        </ion-chip>&nbsp;
    </ng-template>
    <app-comment no-padding [data]="commentsData" [depth]="1" [authoronly]="authoronly" (commentClick)="childCommentClick($event)" 
        [articleauthor]="article.UserName"></app-comment>
</ion-content>
<ion-footer *ngIf="direction=='up'" style="background-color: white;">
    <ion-item *ngIf="!showEditBox">
        <ion-icon name="create" size="medium" (click)="addNewComment()"></ion-icon>
        <ion-input id="newComment" (click)="addNewComment()" 
            readonly padding-start placeholder="写评论..."></ion-input>
        
        <ion-icon color="danger" name="bookmark" size="medium"></ion-icon>
        <ion-text (click)="bookmark()" margin-end>{{ 'Article.Bookmark' | translate }}</ion-text>
        
        <ion-icon color="primary" name="share" size="medium"></ion-icon>
        <ion-text (click)="share()">{{ 'Article.Share' | translate }}</ion-text>
    </ion-item>
    <ion-item *ngIf="showEditBox">
        <ion-textarea autoresize padding #newComment id="newComment" [(ngModel)]="commentContent" rows="3" cols="21" 
        placeholder="说说你的看法..." [disabled]="submitClicked"></ion-textarea>    
        <ion-buttons>
            <ion-grid>
                <ion-row>
                    <ion-col text-center>
                        <ion-icon name="resize" size="medium" (click)="newPopComment(article.Id, -1)"></ion-icon>
                    </ion-col>
                </ion-row>
                <ion-row>
                        <ion-col>
                        </ion-col>
                    </ion-row>
                <ion-row>
                    <ion-col>
                        <ion-button (click)="submit()" position="stack" color="primary" [disabled]="submitClicked||commentContent==null||commentContent==''">发送</ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-buttons>
    </ion-item>
    <ion-item *ngIf="showEditBox">
        <ion-icon slot="end" name="happy" size="medium" (click)="toggleFacePanel()" margin-end></ion-icon>
    </ion-item>
    <ion-grid *ngIf="showEditBox&&showFacePanel">
        <ion-row *ngFor="let row of reddah.emojis">
            <ion-col *ngFor="let col of row" text-center>
                <span (click)="handleSelection(col)" style="width: 80px;height: 80px;">{{col}}</span>
            </ion-col>
        </ion-row> 
    </ion-grid>
</ion-footer>

