<ion-item no-padding>
    <ion-icon name="ios-arrow-back" (click)="close()"></ion-icon>
    <ion-text>评论详情</ion-text>
</ion-item>
<ion-content padding>
    <ion-item lines="none" no-padding>
        <ion-avatar slot="start" class="avatar-top">
            <img src="{{comment.UserPhoto}}" class="portrait" *ngIf="comment.UserPhoto">
            <img src="assets/icon/anonymous.png" class="portrait" *ngIf="!comment.UserPhoto">
        </ion-avatar>
        <ion-label text-wrap>
            <div>
                {{comment.UserNickName?comment.UserNickName:comment.UserName}}
            </div>
            <p>{{comment.CreatedOn | date:'MM-dd HH:mm'}}</p>
            <div [innerHTML]="htmlDecode(comment.Content) | safe: 'html'"></div>
        </ion-label>
    </ion-item>

    <ion-item lines="none" no-padding>
        <ion-label text-wrap>
            全部回复 {{allRepliesCount}}
        </ion-label>
    </ion-item>
    <div *ngFor="let reply of comments">
        <li *ngIf="childrenIds.includes(reply.Id)">
            <ion-item lines="none" no-padding>
                <ion-avatar slot="start" class="avatar-top">
                    <img src="{{reply.UserPhoto}}" class="portrait" *ngIf="reply.UserPhoto">
                    <img src="assets/icon/anonymous.png" class="portrait" *ngIf="!reply.UserPhoto">
                </ion-avatar>
                <ion-label text-wrap>
                    <div>
                        {{reply.UserNickName?reply.UserNickName:reply.UserName}}
                        <ion-icon name="ios-more" style="float:right;"></ion-icon>
                        <ion-icon name="ios-thumbs-up" color="medium" style="float:right;margin-right:5px;"></ion-icon>
                        <span style="float: right;color: gray;margin-right:2px;margin-top:0;font-size: 12px;vertical-align: top;">0</span>
                    </div>
                    <p>{{reply.CreatedOn | date:'MM-dd HH:mm'}}</p>
                    <div *ngIf="reply.ParentId!=comment.Id" style="background-color:#eeeeee;padding:5px;">
                        {{GetUserNameByCommentId(comments,reply.ParentId)}} : <span [innerHTML]="htmlDecode(GetContentByCommentId(comments,reply.ParentId)) | safe: 'html'"></span>
                    </div>
                    <div [innerHTML]="htmlDecode(reply.Content) | safe: 'html'"></div>
                </ion-label>
            </ion-item>
        </li>
    </div>
</ion-content>