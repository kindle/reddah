<ion-item color="light" no-padding lines="none">
    <ion-icon name="ios-arrow-back" (click)="close()" class="backbutton"></ion-icon>
    <ion-icon name="ios-more" slot="end" (click)="presentActionSheet()"></ion-icon>
</ion-item>
<ion-content style="align-items: center; --background:#eeeeee;background-color:#eeeeee;">
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)" spinner="none">
        <ion-refresher-content refreshingSpinner="bubbles">
        </ion-refresher-content>
    </ion-refresher>
    <ion-item lines="none">
        <ion-thumbnail class="userPhoto">
            <img src="{{reddah.appData('userphoto_'+userName)}}" (click)="viewer(reddah.appData('userphoto_'+userName))" class="portrait">
        </ion-thumbnail>
        <ion-label class="userInfo">
            <span class="user-name">{{reddah.getDisplayName(userName)}}</span>
            <ion-icon class="cmd-title" name="ios-male" *ngIf="reddah.appData('usersex_'+userName)==1" color="secondary"></ion-icon>
            <ion-icon class="cmd-title" name="ios-female" *ngIf="reddah.appData('usersex_'+userName)==0" color="danger"></ion-icon>
            <br>
            <span *ngIf="reddah.appData('usernickname_'+userName)">昵称：{{reddah.appData('usernickname_'+userName)}}</span><br>
            <span>ID：{{userName}}</span>
        </ion-label>
    </ion-item>

    <ion-item lines="none" style="--background:#eeeeee;height:10px;">
    </ion-item>
    <ion-item class="borderTop" (click)="changeNoteName()" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==1">
        <ion-label>设置备注和标签</ion-label>
        <ion-icon name="ios-arrow-forward" slot="end" size="small"></ion-icon>
    </ion-item>
    <ion-item lines="none">
        <span class="itemTitle">个性签名</span>
        <ion-label text-wrap>{{reddah.appData('usersignature_'+userName)}}</ion-label>
    </ion-item>
    <ion-item lines="none" class="borderBottom" (click)="goLocation()" *ngIf="reddah.appData('userlocation_'+userName)">
        <ion-icon name="pin" color="primary" style="margin-right:5px;"></ion-icon>
        <span class="itemTitle">位置</span>
        <ion-label>{{reddah.appData('userlocation_'+userName)}}</ion-label>
    </ion-item>
    
    <ion-item lines="none" style="--background:#eeeeee;height:10px;">
    </ion-item>
    <ion-item lines="none" class="borderTop borderBottom" (click)="viewTimeline()" *ngIf="imageList&&imageList.length>0">
        <span class="itemTitle" style="line-height: 90px;">时光圈</span>
        <ion-thumbnail *ngFor="let image of imageList" style="padding: 5px;">
            <img [id]="reddah.makeItId(image)" (load)="reddah.adjustImage($event, image)"
                [defaultImage]="'assets/icon/noimage.jpg'" 
                [lazyLoad]="image" 
                [useSrcset]="true">
        </ion-thumbnail>
        <ion-icon name="ios-arrow-forward" slot="end" size="small"></ion-icon>
    </ion-item>

    <ion-item class="borderTop borderBottom" lines="none" (click)="goMore()" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==1">
        <span class="itemTitle">更多信息</span>
        <ion-icon name="ios-arrow-forward" slot="end" size="small"></ion-icon>
    </ion-item>
    
    <ion-item lines="none" style="--background:#eeeeee;height:10px;">
    </ion-item>
    <ion-item class="borderTop" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==1" (click)="chat()">
        <div class="centerItem">
            <ion-icon name="chatboxes"></ion-icon>
            <ion-note color="dark" class="cmd-title">发消息</ion-note>
        </div>
    </ion-item>
    <!--<ion-item class="borderBottom" lines="none" href="/#" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==1">
        <div class="centerItem">
            <ion-icon name="videocam"></ion-icon>
            <ion-note color="dark" class="cmd-title">音视频通话</ion-note>
        </div>
    </ion-item>-->
    <ion-item  class="borderTop borderBottom" (click)="addFriend()" *ngIf="reddah.appData('userisfriend_'+this.userName+'_'+this.currentUserName)==0&&userName!=reddah.getCurrentUser()">
        <div class="centerItem">
            <ion-note color="dark" class="cmd-title">添加为好友</ion-note>
        </div>
    </ion-item>
</ion-content>