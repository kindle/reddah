
<ion-content color="point">
    <div class="bg1">
        {{ 'Menu.MyPoints' | translate }}
    </div>
    <div class="bg2">
        P
    </div>

    <ion-item no-padding lines="none" color="transparent" class="title" style="--background:transparent;">
        <ion-button clear icon-start color="transparent" (click)="close()" style="--box-shadow: none;">
            <ion-icon is-active="false" name="ios-arrow-back"></ion-icon>
        </ion-button>
        <ion-card-title color="light" style="font-size: large;font-weight: bold;">{{ 'Menu.MyPoints' | translate }}</ion-card-title>
        <ion-button clear slot="end" color="transparent" (click)="pointDetails()" 
            style="--box-shadow: none;text-transform: none;font-size: large;">
            {{ 'Point.PointHistory' | translate }}
        </ion-button>
    </ion-item>

    <ion-card>
        <ion-card-header>
            <ion-card-subtitle style="color:#fff;text-align: center;">
                {{ 'Point.TotalPointTitle' | translate }}
            </ion-card-subtitle>
            <ion-card-title style="color:#fff;font-size: -webkit-xxx-large;text-align: center;">
                {{reddah.appData('userpoint_'+userName)}}
            </ion-card-title>
            <ion-card-content style="color:#fff;text-align: center;" (click)="showRule()">
                {{ 'Point.PointLevel' | translate }}: {{ reddah.userLevel(userName) | translate }}
            </ion-card-content>
        </ion-card-header>
    </ion-card>

    <ion-card class="welcome-card" color="light" *ngIf="display">
        <ion-item lines="none">
            <ion-icon style="margin-left:30px;" name="radio-button-off" color="dark"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Illiterate' | translate }}</ion-card-title>
            <ion-label slot="end">0-199</ion-label>
        </ion-item>
        <ion-item lines="none" style="background-color:#d7d8da;">
            <ion-icon style="margin-left:30px;" name="ribbon" color="dark"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Bronze' | translate }}</ion-card-title>
            <ion-label slot="end">200-299</ion-label>
        </ion-item>
        <ion-item lines="none">
            <ion-icon style="margin-left:30px;" name="star-outline" color="primary"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Silver' | translate }}</ion-card-title>
            <ion-label slot="end">300-499</ion-label>
        </ion-item>
        <ion-item lines="none">
            <ion-icon style="margin-left:30px;" name="star" color="gold"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Gold' | translate }}</ion-card-title>
            <ion-label slot="end">500-699</ion-label>
        </ion-item>
        <ion-item lines="none" style="background-color:#d7d8da;">
            <ion-icon style="margin-left:30px;" name="medal" color="point"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Platinum' | translate }}</ion-card-title>
            <ion-label slot="end">700-999</ion-label>
        </ion-item>
        <ion-item lines="none">
            <ion-icon style="margin-left:30px;" name="trophy" color="diamond"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Diamond' | translate }}</ion-card-title>
            <ion-label slot="end">1000-1999</ion-label>
        </ion-item>
        <ion-item lines="none">
            <ion-icon style="margin-left:30px;" name="school" color="dark"></ion-icon>
            <ion-card-title style="margin-left:15px;">{{ 'Point.Level_Erudite' | translate }}</ion-card-title>
            <ion-label slot="end">2000~</ion-label>
        </ion-item>
    </ion-card>

    <ion-item lines="none" color="transparent" class="title">
        <ion-card-title color="light" style="font-size: large;font-weight: bold;">{{ 'Point.RuleTitle' | translate }}</ion-card-title>
        <ion-text style="font-size: large;" color="light" slot="end">{{ reddah.lan3('Point.TodayTotal' | translate, '+'+reddah.getPoint('TodayTotalPoint'), 'Point.Fen' | translate) }}</ion-text>
    </ion-item>

    <ion-card class="welcome-card" color="light">
        <ion-item lines="none">
            <ion-icon name="calendar" color="dark"></ion-icon>
            <ion-card-title>{{ 'Point.PunchClock' | translate }}</ion-card-title>
            <ion-button clear slot="end" color="warning" (click)="punchClock()" 
                style="--box-shadow: none;text-transform: none;" *ngIf="!reddah.getPoint('PunchClock')">
                {{ 'Point.Letsgo' | translate }}
            </ion-button>
            <ion-button clear slot="end" color="light" (click)="punchClock()" 
                style="--box-shadow: none;text-transform: none;" *ngIf="reddah.getPoint('PunchClock')">
                {{ 'Point.Done' | translate }}
            </ion-button>
        </ion-item>
    </ion-card>

    <ion-card class="welcome-card" color="light" *ngFor="let task of reddah.pointTasks">
        <ion-item lines="none">
            <ion-card-title>{{ task.title | translate }}</ion-card-title>
            <ion-button clear slot="end" color="warning" (click)="doTask(task)" 
                style="--box-shadow: none;text-transform: none;" *ngIf="!reddah.isPointDone(task)">
                {{ 'Point.Letsgo' | translate }}
            </ion-button>
            <ion-button clear slot="end" color="light" 
                style="--box-shadow: none;text-transform: none;" *ngIf="reddah.isPointDone(task)">
                {{ 'Point.Done' | translate }}
            </ion-button>
        </ion-item>
        <ion-card-content>
            <p>{{ reddah.lan2(task.point, 'Point.Fen' | translate) }} / {{ task.description | translate}}</p>
            <p *ngIf="task.type==0">{{ reddah.lan3('Point.AlreadyGot' | translate, reddah.getCurrentPoint(task), 'Point.Fen' | translate) }}
                / {{ reddah.lan3('Point.DailyMax' | translate, task.max,  'Point.Fen' | translate) }}</p>
            <p *ngIf="task.type==1">{{ reddah.lan3('Point.AlreadyGot' | translate, reddah.getCurrentPoint(task), 'Point.Fen' | translate) }}
                / {{ reddah.lan3('Point.OnceMax' | translate, task.max,  'Point.Fen' | translate) }}</p>
        </ion-card-content>
    </ion-card>
</ion-content>